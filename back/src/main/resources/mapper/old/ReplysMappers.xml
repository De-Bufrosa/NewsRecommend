<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.smacul.demo.dao.ReplysDao">

    <select id="searchReplysByComId" resultType="com.smacul.demo.model.ReplyCustomerModel">
        select R.*,
            C.cus_avatar_url as 'customer.cusAvatarUrl',
            C.cus_id as 'customer.cusId',
            C.cus_name as 'customer.cusName',
            C.cus_type as 'customer.cusType'
        from Replys as R, Customers as C
        where R.rep_comment_id = #{comId} and R.rep_customer_id = C.cus_id
        order by rep_time desc
    </select>

    <update id="updateRepLikeNum">
        update Replys set rep_like_num=rep_like_num+1 where rep_id=#{repId}
    </update>

    <update id="updateRepDislikeNum">
        update Replys set rep_dislike_num=rep_dislike_num+1 where rep_id=#{repId}
    </update>

    <insert id="insertReply" parameterType="com.smacul.demo.bean.Reply">
        insert into Replys(rep_content, rep_type, rep_legal, rep_customer_id, rep_article_id, rep_comment_id, rep_reply_id)
        values (#{repContent}, #{repType}, #{repLegal}, #{repCustomerId}, #{repArticleId}, #{repCommentId}, #{repReplyId})
    </insert>


</mapper>